{"ast":null,"code":"import _objectSpread from\"/home/daniel/Documents/PROJECTS/ALX-AI-Agents-Capstone-Project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useState,useContext}from'react';import{useAuth}from'../hooks/useAuth';import{taskService}from'../services/tasks';import{jsx as _jsx}from\"react/jsx-runtime\";export const TaskContext=/*#__PURE__*/createContext(undefined);export const TaskProvider=_ref=>{let{children}=_ref;const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[filters,setFilters]=useState({});const[selectedTask,setSelectedTask]=useState(null);const{isAuthenticated}=useAuth();const fetchTasks=async()=>{if(!isAuthenticated)return;try{setLoading(true);setError(null);const response=await taskService.getTasks(filters);setTasks(response.tasks);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to fetch tasks');console.error('Error fetching tasks:',err);}finally{setLoading(false);}};React.useEffect(()=>{fetchTasks();},[isAuthenticated,filters,fetchTasks]);const createTask=async taskData=>{try{const newTask=await taskService.createTask(taskData);setTasks(prev=>[newTask,...prev]);}catch(err){var _err$response2,_err$response2$data;throw new Error(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to create task');}};const updateTask=async(taskId,updates)=>{try{const updatedTask=await taskService.updateTask(taskId,updates);setTasks(prev=>prev.map(task=>task.id===taskId?_objectSpread(_objectSpread({},task),updatedTask):task));if((selectedTask===null||selectedTask===void 0?void 0:selectedTask.id)===taskId){setSelectedTask(updatedTask);}}catch(err){var _err$response3,_err$response3$data;throw new Error(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.message)||'Failed to update task');}};const deleteTask=async taskId=>{try{await taskService.deleteTask(taskId);setTasks(prev=>prev.filter(task=>task.id!==taskId));if((selectedTask===null||selectedTask===void 0?void 0:selectedTask.id)===taskId){setSelectedTask(null);}}catch(err){var _err$response4,_err$response4$data;throw new Error(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.message)||'Failed to delete task');}};const toggleTaskCompletion=async(taskId,completed)=>{try{const updatedTask=await taskService.updateTask(taskId,{completed});setTasks(prev=>prev.map(task=>task.id===taskId?_objectSpread(_objectSpread({},task),updatedTask):task));}catch(err){var _err$response5,_err$response5$data;throw new Error(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.message)||'Failed to update task');}};const clearError=()=>setError(null);const refetchTasks=async()=>{await fetchTasks();};const value={tasks,loading,error,filters,selectedTask,setSelectedTask,createTask,updateTask,deleteTask,toggleTaskCompletion,setFilters,clearError,refetchTasks};return/*#__PURE__*/_jsx(TaskContext.Provider,{value:value,children:children});};export const useTaskContext=()=>{const context=useContext(TaskContext);if(context===undefined){throw new Error('useTaskContext must be used within a TaskProvider');}return context;};","map":{"version":3,"names":["React","createContext","useState","useContext","useAuth","taskService","jsx","_jsx","TaskContext","undefined","TaskProvider","_ref","children","tasks","setTasks","loading","setLoading","error","setError","filters","setFilters","selectedTask","setSelectedTask","isAuthenticated","fetchTasks","response","getTasks","err","_err$response","_err$response$data","data","message","console","useEffect","createTask","taskData","newTask","prev","_err$response2","_err$response2$data","Error","updateTask","taskId","updates","updatedTask","map","task","id","_objectSpread","_err$response3","_err$response3$data","deleteTask","filter","_err$response4","_err$response4$data","toggleTaskCompletion","completed","_err$response5","_err$response5$data","clearError","refetchTasks","value","Provider","useTaskContext","context"],"sources":["/home/daniel/Documents/PROJECTS/ALX-AI-Agents-Capstone-Project/frontend/src/contexts/TaskContext.tsx"],"sourcesContent":["import React, { createContext, useState, ReactNode, useContext } from 'react';\nimport { Task, TaskFilters } from '../types/task';\nimport { useAuth } from '../hooks/useAuth';\nimport { taskService } from '../services/tasks';\n\ninterface TaskContextType {\n  tasks: Task[];\n  loading: boolean;\n  error: string | null;\n  filters: TaskFilters;\n  selectedTask: Task | null;\n  setSelectedTask: (task: Task | null) => void;\n  createTask: (taskData: Partial<Task>) => Promise<void>;\n  updateTask: (taskId: string, updates: Partial<Task>) => Promise<void>;\n  deleteTask: (taskId: string) => Promise<void>;\n  toggleTaskCompletion: (taskId: string, completed: boolean) => Promise<void>;\n  setFilters: (filters: TaskFilters) => void;\n  clearError: () => void;\n  refetchTasks: () => Promise<void>;\n}\n\nexport const TaskContext = createContext<TaskContextType | undefined>(undefined);\n\ninterface TaskProviderProps {\n  children: ReactNode;\n}\n\nexport const TaskProvider: React.FC<TaskProviderProps> = ({ children }) => {\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [filters, setFilters] = useState<TaskFilters>({});\n  const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n\n  const { isAuthenticated } = useAuth();\n\n  const fetchTasks = async () => {\n    if (!isAuthenticated) return;\n\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await taskService.getTasks(filters);\n      setTasks(response.tasks);\n    } catch (err: any) {\n      setError(err.response?.data?.message || 'Failed to fetch tasks');\n      console.error('Error fetching tasks:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  React.useEffect(() => {\n    fetchTasks();\n  }, [isAuthenticated, filters, fetchTasks]);\n\n  const createTask = async (taskData: Partial<Task>): Promise<void> => {\n    try {\n      const newTask = await taskService.createTask(taskData);\n      setTasks(prev => [newTask, ...prev]);\n    } catch (err: any) {\n      throw new Error(err.response?.data?.message || 'Failed to create task');\n    }\n  };\n\n  const updateTask = async (taskId: string, updates: Partial<Task>): Promise<void> => {\n    try {\n      const updatedTask = await taskService.updateTask(taskId, updates);\n      setTasks(prev => prev.map(task => \n        task.id === taskId ? { ...task, ...updatedTask } : task\n      ));\n      \n      if (selectedTask?.id === taskId) {\n        setSelectedTask(updatedTask);\n      }\n    } catch (err: any) {\n      throw new Error(err.response?.data?.message || 'Failed to update task');\n    }\n  };\n\n  const deleteTask = async (taskId: string): Promise<void> => {\n    try {\n      await taskService.deleteTask(taskId);\n      setTasks(prev => prev.filter(task => task.id !== taskId));\n      \n      if (selectedTask?.id === taskId) {\n        setSelectedTask(null);\n      }\n    } catch (err: any) {\n      throw new Error(err.response?.data?.message || 'Failed to delete task');\n    }\n  };\n\n  const toggleTaskCompletion = async (taskId: string, completed: boolean): Promise<void> => {\n    try {\n      const updatedTask = await taskService.updateTask(taskId, { completed });\n      setTasks(prev => prev.map(task => \n        task.id === taskId ? { ...task, ...updatedTask } : task\n      ));\n    } catch (err: any) {\n      throw new Error(err.response?.data?.message || 'Failed to update task');\n    }\n  };\n\n  const clearError = () => setError(null);\n\n  const refetchTasks = async () => {\n    await fetchTasks();\n  };\n\n  const value: TaskContextType = {\n    tasks,\n    loading,\n    error,\n    filters,\n    selectedTask,\n    setSelectedTask,\n    createTask,\n    updateTask,\n    deleteTask,\n    toggleTaskCompletion,\n    setFilters,\n    clearError,\n    refetchTasks\n  };\n\n  return (\n    <TaskContext.Provider value={value}>\n      {children}\n    </TaskContext.Provider>\n  );\n};\n\nexport const useTaskContext = () => {\n  const context = useContext(TaskContext);\n  if (context === undefined) {\n    throw new Error('useTaskContext must be used within a TaskProvider');\n  }\n  return context;\n};"],"mappings":"4JAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAaC,UAAU,KAAQ,OAAO,CAE7E,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,OAASC,WAAW,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAkBhD,MAAO,MAAM,CAAAC,WAAW,cAAGP,aAAa,CAA8BQ,SAAS,CAAC,CAMhF,MAAO,MAAM,CAAAC,YAAyC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpE,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAS,EAAE,CAAC,CAC9C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAACiB,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAc,CAAC,CAAC,CAAC,CACvD,KAAM,CAACmB,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAc,IAAI,CAAC,CAEnE,KAAM,CAAEqB,eAAgB,CAAC,CAAGnB,OAAO,CAAC,CAAC,CAErC,KAAM,CAAAoB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACD,eAAe,CAAE,OAEtB,GAAI,CACFP,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,KAAM,CAAAO,QAAQ,CAAG,KAAM,CAAApB,WAAW,CAACqB,QAAQ,CAACP,OAAO,CAAC,CACpDL,QAAQ,CAACW,QAAQ,CAACZ,KAAK,CAAC,CAC1B,CAAE,MAAOc,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjBX,QAAQ,CAAC,EAAAU,aAAA,CAAAD,GAAG,CAACF,QAAQ,UAAAG,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcE,IAAI,UAAAD,kBAAA,iBAAlBA,kBAAA,CAAoBE,OAAO,GAAI,uBAAuB,CAAC,CAChEC,OAAO,CAACf,KAAK,CAAC,uBAAuB,CAAEU,GAAG,CAAC,CAC7C,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDhB,KAAK,CAACiC,SAAS,CAAC,IAAM,CACpBT,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACD,eAAe,CAAEJ,OAAO,CAAEK,UAAU,CAAC,CAAC,CAE1C,KAAM,CAAAU,UAAU,CAAG,KAAO,CAAAC,QAAuB,EAAoB,CACnE,GAAI,CACF,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAA/B,WAAW,CAAC6B,UAAU,CAACC,QAAQ,CAAC,CACtDrB,QAAQ,CAACuB,IAAI,EAAI,CAACD,OAAO,CAAE,GAAGC,IAAI,CAAC,CAAC,CACtC,CAAE,MAAOV,GAAQ,CAAE,KAAAW,cAAA,CAAAC,mBAAA,CACjB,KAAM,IAAI,CAAAC,KAAK,CAAC,EAAAF,cAAA,CAAAX,GAAG,CAACF,QAAQ,UAAAa,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcR,IAAI,UAAAS,mBAAA,iBAAlBA,mBAAA,CAAoBR,OAAO,GAAI,uBAAuB,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAU,UAAU,CAAG,KAAAA,CAAOC,MAAc,CAAEC,OAAsB,GAAoB,CAClF,GAAI,CACF,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAvC,WAAW,CAACoC,UAAU,CAACC,MAAM,CAAEC,OAAO,CAAC,CACjE7B,QAAQ,CAACuB,IAAI,EAAIA,IAAI,CAACQ,GAAG,CAACC,IAAI,EAC5BA,IAAI,CAACC,EAAE,GAAKL,MAAM,CAAAM,aAAA,CAAAA,aAAA,IAAQF,IAAI,EAAKF,WAAW,EAAKE,IACrD,CAAC,CAAC,CAEF,GAAI,CAAAzB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAE0B,EAAE,IAAKL,MAAM,CAAE,CAC/BpB,eAAe,CAACsB,WAAW,CAAC,CAC9B,CACF,CAAE,MAAOjB,GAAQ,CAAE,KAAAsB,cAAA,CAAAC,mBAAA,CACjB,KAAM,IAAI,CAAAV,KAAK,CAAC,EAAAS,cAAA,CAAAtB,GAAG,CAACF,QAAQ,UAAAwB,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcnB,IAAI,UAAAoB,mBAAA,iBAAlBA,mBAAA,CAAoBnB,OAAO,GAAI,uBAAuB,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAoB,UAAU,CAAG,KAAO,CAAAT,MAAc,EAAoB,CAC1D,GAAI,CACF,KAAM,CAAArC,WAAW,CAAC8C,UAAU,CAACT,MAAM,CAAC,CACpC5B,QAAQ,CAACuB,IAAI,EAAIA,IAAI,CAACe,MAAM,CAACN,IAAI,EAAIA,IAAI,CAACC,EAAE,GAAKL,MAAM,CAAC,CAAC,CAEzD,GAAI,CAAArB,YAAY,SAAZA,YAAY,iBAAZA,YAAY,CAAE0B,EAAE,IAAKL,MAAM,CAAE,CAC/BpB,eAAe,CAAC,IAAI,CAAC,CACvB,CACF,CAAE,MAAOK,GAAQ,CAAE,KAAA0B,cAAA,CAAAC,mBAAA,CACjB,KAAM,IAAI,CAAAd,KAAK,CAAC,EAAAa,cAAA,CAAA1B,GAAG,CAACF,QAAQ,UAAA4B,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAcvB,IAAI,UAAAwB,mBAAA,iBAAlBA,mBAAA,CAAoBvB,OAAO,GAAI,uBAAuB,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAAwB,oBAAoB,CAAG,KAAAA,CAAOb,MAAc,CAAEc,SAAkB,GAAoB,CACxF,GAAI,CACF,KAAM,CAAAZ,WAAW,CAAG,KAAM,CAAAvC,WAAW,CAACoC,UAAU,CAACC,MAAM,CAAE,CAAEc,SAAU,CAAC,CAAC,CACvE1C,QAAQ,CAACuB,IAAI,EAAIA,IAAI,CAACQ,GAAG,CAACC,IAAI,EAC5BA,IAAI,CAACC,EAAE,GAAKL,MAAM,CAAAM,aAAA,CAAAA,aAAA,IAAQF,IAAI,EAAKF,WAAW,EAAKE,IACrD,CAAC,CAAC,CACJ,CAAE,MAAOnB,GAAQ,CAAE,KAAA8B,cAAA,CAAAC,mBAAA,CACjB,KAAM,IAAI,CAAAlB,KAAK,CAAC,EAAAiB,cAAA,CAAA9B,GAAG,CAACF,QAAQ,UAAAgC,cAAA,kBAAAC,mBAAA,CAAZD,cAAA,CAAc3B,IAAI,UAAA4B,mBAAA,iBAAlBA,mBAAA,CAAoB3B,OAAO,GAAI,uBAAuB,CAAC,CACzE,CACF,CAAC,CAED,KAAM,CAAA4B,UAAU,CAAGA,CAAA,GAAMzC,QAAQ,CAAC,IAAI,CAAC,CAEvC,KAAM,CAAA0C,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAApC,UAAU,CAAC,CAAC,CACpB,CAAC,CAED,KAAM,CAAAqC,KAAsB,CAAG,CAC7BhD,KAAK,CACLE,OAAO,CACPE,KAAK,CACLE,OAAO,CACPE,YAAY,CACZC,eAAe,CACfY,UAAU,CACVO,UAAU,CACVU,UAAU,CACVI,oBAAoB,CACpBnC,UAAU,CACVuC,UAAU,CACVC,YACF,CAAC,CAED,mBACErD,IAAA,CAACC,WAAW,CAACsD,QAAQ,EAACD,KAAK,CAAEA,KAAM,CAAAjD,QAAA,CAChCA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAmD,cAAc,CAAGA,CAAA,GAAM,CAClC,KAAM,CAAAC,OAAO,CAAG7D,UAAU,CAACK,WAAW,CAAC,CACvC,GAAIwD,OAAO,GAAKvD,SAAS,CAAE,CACzB,KAAM,IAAI,CAAA+B,KAAK,CAAC,mDAAmD,CAAC,CACtE,CACA,MAAO,CAAAwB,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}